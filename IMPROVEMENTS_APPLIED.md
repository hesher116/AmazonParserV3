# –ó–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ

### 1. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—É –ø–æ–º–∏–ª–∫—É
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫—É –≤ `agents/qa_parser.py` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ try-except)

### 2. –õ–æ–≥—É–≤–∞–Ω–Ω—è fallback –¥–æ Selenium
- ‚úÖ –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ `BaseParser.find_element_by_selector()` —Ç–∞ `find_elements_by_selector()`
- ‚úÖ –¢–µ–ø–µ—Ä –≤–∏–¥–Ω–æ –≤ –ª–æ–≥–∞—Ö, –∫–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è fallback –¥–æ Selenium –∑–∞–º—ñ—Å—Ç—å DOM dump
- ‚úÖ –§–æ—Ä–º–∞—Ç: `‚ö†Ô∏è  Fallback to Selenium for selector: ...`

### 3. –°–∏—Å—Ç–µ–º–∞ –º–µ—Ç—Ä–∏–∫ –ø–∞—Ä—Å–∏–Ω–≥—É
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ `core/parsing_metrics.py` –∑ –∫–ª–∞—Å–æ–º `ParsingMetrics`
- ‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤ (success/fail count)
- ‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –ø–∞—Ä—Å–∏–Ω–≥—É (success/partial/failed)
- ‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è fallback –º–µ—Ç–æ–¥—ñ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É –∫–µ—à—É —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤ (max 50)
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫ –∑ JSON —Ñ–∞–π–ª—É

### 4. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –º–µ—Ç—Ä–∏–∫ –≤ Coordinator
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è –≤ `Coordinator.__init__()`
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –∞–≥–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ `agent.metrics`
- ‚úÖ –ü—ñ–¥—Å—É–º–æ–∫ –º–µ—Ç—Ä–∏–∫ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –≤ –ª–æ–≥ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø–∞—Ä—Å–∏–Ω–≥—É
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–∞—Ä—Å–∏–Ω–≥—É

### 5. –î–æ–¥–∞–Ω–æ fallback —Å–µ–ª–µ–∫—Ç–æ—Ä–∏
- ‚úÖ –î–æ–¥–∞–Ω–æ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è title: `[data-automation-id="title"]`, `h1`
- ‚úÖ –ü–æ–ø—É–ª—è—Ä–Ω—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –≤ `ParsingMetrics.popular_selectors`

### 6. –ü—Ä—ñ–æ—Ä–∏—Ç–∏–∑–∞—Ü—ñ—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤
- ‚úÖ –ú–µ—Ç–æ–¥ `get_prioritized_selectors()` —Å–æ—Ä—Ç—É—î —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –∑–∞ success rate
- ‚úÖ –°–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏, –ø–æ—Ç—ñ–º –Ω–∞–π—É—Å–ø—ñ—à–Ω—ñ—à—ñ –∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—ñ

### 7. –ö–µ—à—É–≤–∞–Ω–Ω—è —É—Å–ø—ñ—à–Ω–∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤
- ‚úÖ –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –≤ `ParsingMetrics`
- ‚è≥ –ü–æ—Ç—Ä—ñ–±–Ω–æ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –≤ –∞–≥–µ–Ω—Ç—ñ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 8. –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
- ‚è≥ –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ ThreadPoolExecutor
- ‚è≥ –ó–±–µ—Ä–µ–≥—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É –Ω—É–º–µ—Ä–∞—Ü—ñ—é —Ç–∞ –æ–±—Ä–æ–±–∫—É –∫–∞—Ä—É—Å–µ–ª–µ–π

## üìã –ü–ª–∞–Ω –ø–æ–¥–∞–ª—å—à–∏—Ö –¥—ñ–π

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1 (–ö–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤–æ)
1. –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∫–µ—à—É–≤–∞–Ω–Ω—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –≤ –∞–≥–µ–Ω—Ç—ñ–≤
2. –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
3. –î–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ data-–∞—Ç—Ä–∏–±—É—Ç—ñ–≤ –¥–ª—è fallback —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2 (–°–µ—Ä–µ–¥–Ω—å–æ—Å—Ç—Ä–æ–∫–æ–≤–æ)
1. –î–æ–¥–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫ –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏
2. –ü–æ–∫—Ä–∞—â–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º
3. –î–æ–¥–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ—à—ñ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç—É

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3 (–î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ)
1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ (asyncio)
2. –ú–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–Ω—Ç—É
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–æ –∑–º—ñ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ Amazon

## üìä –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É –º–µ—Ç—Ä–∏–∫

```
================================================================================
PARSING METRICS SUMMARY
================================================================================
TEXT: 5 success, 0 partial, 0 failed (100.0% success rate)
IMAGES: 4 success, 1 partial, 0 failed (80.0% success rate)
REVIEWS: 3 success, 0 partial, 0 failed (100.0% success rate)
QA: 2 success, 1 partial, 0 failed (66.7% success rate)
Fallback usage: {'selenium': 12}
================================================================================
```

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç—Ä–∏–∫

```python
{
    'parsing_metrics': {
        'text': {'success': 5, 'partial': 0, 'failed': 0},
        'images': {'success': 4, 'partial': 1, 'failed': 0},
        'reviews': {'success': 3, 'partial': 0, 'failed': 0},
        'qa': {'success': 2, 'partial': 1, 'failed': 0}
    },
    'selector_success_rates': {
        '#productTitle': {
            'success_rate': 0.95,
            'total_uses': 20,
            'last_used': '2025-01-29T12:00:00'
        }
    },
    'fallback_usage': {
        'selenium': 12
    },
    'total_selectors_tracked': 45
}
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–¥—ñ

```python
# –í –∞–≥–µ–Ω—Ç—ñ
if hasattr(self, 'metrics'):
    self.metrics.record_selector_success(selector, True)

# –í Coordinator
self.metrics.record_parsing_result('text', success=True, partial=False)
self.metrics.record_fallback('selenium')
```

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 2025-01-29
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2025-01-29

